<div class="page">
  <header class="users-header">
    <div class="header-info">
      <h2>Users</h2>
      <p class="subtitle">Add, edit, view, and delete users via modal.</p>
      <a routerLink="/" class="back-link">
        <i class="pi pi-arrow-left"></i>
        Back to Landing Page
      </a>
    </div>

    <div class="actions-bar">
      <p-button label="Add User" icon="pi pi-plus" (onClick)="openAdd()" />
    </div>
  </header>

  <div class="filters-card">
    <div class="filters-row">
      <span class="p-input-icon-left filter-field">
        <i class="pi pi-search"></i>
        <input
          pInputText
          type="text"
          placeholder="Search by name or country"
          [ngModel]="searchTerm"
          (ngModelChange)="handleSearchChange($event)"
        />
      </span>
      <p-select
        [options]="genderOptions"
        optionLabel="label"
        optionValue="value"
        [ngModel]="genderFilter"
        (onChange)="handleGenderChange($event.value)"
        placeholder="Gender"
        styleClass="filter-field filters-select"
      ></p-select>
    </div>
  </div>

  <app-user-dialog-component
    [visible]="dialogVisible()"
    [mode]="dialogMode()"
    [user]="selectedUser()"
    (close)="handleClose()"
    (save)="handleSave($event)"
  ></app-user-dialog-component>

  @if (loading()) {
  <div class="table-card loading-card">
    <i class="pi pi-spinner pi-spin"></i>
    <span>Loading usersâ€¦</span>
  </div>
  } @else {
  <div class="table-card">
    <app-user-table-component
      [users]="users()"
      [first]="first"
      [totalRecords]="total()"
      [pageSize]="pageSize"
      (view)="openView($event)"
      (edit)="openEdit($event)"
      (remove)="handleDelete($event)"
      (pageChange)="handlePageChange($event)"
    />
  </div>
  }
</div>

<app-confirm-dialog-component></app-confirm-dialog-component>
